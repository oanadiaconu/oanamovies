var tdAnalyzeCssMain;
(function(d,y,m){function u(a,c,b,g){var f=!1;try{b.cssRules}catch(A){return f}if("google-fonts-style-css"!==c&&"admin-bar-css"!==c&&"cssRules"in b&&"CSSRuleList"===b.cssRules.constructor.name)for(var k in b.cssRules)if(b.cssRules.hasOwnProperty(k))if("CSSStyleRule"===b.cssRules[k].constructor.name){var e=b.cssRules[k].cssText.trimChar(" ");if(e.length)if(0<e.indexOf(":not"))f='<div><div class="tda-style tda-result-line-found">'+e+"</div></div>",g.append(f),f=!0;else if(0<e.indexOf(",")){if(e=e.split("{"),
2===e.length){var h=e[0];e=e[1].split("}");if(2===e.length){h=h.split(",");for(var q=0;q<h.length;q++){f=h[q].trimChar(" ");var n=e[0].trimChar(" ");n=n.replace(")) text;",")); -webkit-background-clip: text;");f='<div><div class="tda-style">'+f+"{"+n+"}</div></div>";g.append(f);f=!0}}}}else if(h=e,-1===["html { margin-top: 32px !important; }","* html body { margin-top: 32px !important; }","html { margin-top: 46px !important; }","* html body { margin-top: 46px !important; }"].indexOf(e)){if(null!==
b.cssRules[k].parentStyleSheet.href){var l=b.cssRules[k].parentStyleSheet.href.split("/"),p="";l.length&&1<l.length?l.forEach(function(a,b){b<l.length-1&&(p+=a+"/")}):p=b.cssRules[k].parentStyleSheet.href;h=/background-image\s*:\s*url\(\s*"(.*)\s*"\)\s*;/mg;h=e.replace(h,'background-image: url("'+p+'$1");')}h=h.replace(")) text;",")); -webkit-background-clip: text;");f='<div><div class="tda-style">'+h+"</div></div>";g.append(f);f=!0}}else if("CSSFontFaceRule"===b.cssRules[k].constructor.name)e=b.cssRules[k].cssText,
h=/url\("([^\)]+?\.(woff|eot|woff2|ttf|svg)[^"]*)"\s*\)/gm,null===b.cssRules[k].parentStyleSheet.href?(console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"),console.log(b),console.log(k),console.log(b.cssRules[k])):(l=b.cssRules[k].parentStyleSheet.href.split("/"),p="",l.length&&1<l.length?l.forEach(function(a,b){b<l.length-1&&(p+=a+"/")}):p=b.cssRules[k].parentStyleSheet.href,f='<div><div class="tda-font-face">'+e.replace(h,'url("'+p+'$1")')+"</div></div>",g.append(f),f=!0);else if("CSSMediaRule"===
b.cssRules[k].constructor.name)e=d('<div class="tda-analyze-media-rule" data-media-rule="'+b.cssRules[k].conditionText+'"></div>'),u(a,c,b.cssRules[k],e)&&(g.append(e),f=!0);else if("CSSSupportsRule"===b.cssRules[k].constructor.name)e=d('<div class="tda-analyze-support-rule" data-supports-rule="'+b.cssRules[k].conditionText+'"></div>'),u(a,c,b.cssRules[k],e)&&(g.append(e),f=!0);else if("CSSImportRule"===b.cssRules[k].constructor.name)f=u(a,c,b.cssRules[k].styleSheet,g);else if("CSSKeyframesRule"===
b.cssRules[k].constructor.name){f='<div><div class="tda-analyze-frames-rule tda-style" style="border: 1px solid brown" data-key="'+b.cssRules[k].cssText+'">'+b.cssRules[k].cssText.trimChar(" ")+"</div></div>";g.append(f);f=!0;for(var m in b.cssRules[k].cssRules)e=b.cssRules[k].cssRules[m],"CSSKeyframeRule"===e.constructor.name&&(e=d('<div class="tda-analyze-frame-rule" style="border: 1px solid brown" data-key="'+e.cssText+'">'+e.cssText.trimChar(" ")+"</div>"),g.append(e))}return f}function v(a,c){var b=
"",g="",f=!1;c.each(function(){var a=d(this),c=a.parent().data("media-rule");"undefined"===typeof c&&(c=a.parent().parent().data("media-rule"));"undefined"===typeof c?f?(b+="}"+this.textContent,f=!1,g=""):b+=this.textContent:f?g===c?b+=this.textContent:(b+="}@media"+c+"{"+this.textContent,g=c):(b+="@media"+c+"{"+this.textContent,f=!0,g=c)});return b}function w(a){var c=a.find(".tda-result-label"),b=a.find(".tda-result-lines");a=b.find(".tda-result-line-found:not(.tda-result-line-selected-no), .tda-result-line-diff:not(.tda-result-line-selected-no), .tda-result-line-selected-yes").length;
var d=b.find(".tda-result-line-found.tda-result-line-critical:not(.tda-result-line-selected-no), .tda-result-line-diff.tda-result-line-critical:not(.tda-result-line-selected-no), .tda-result-line-selected-yes").length,f=b.find(".tda-result-line-diff:not(.tda-result-line-selected-no, .tda-result-line-selected-yes )").length,k=b.find(".tda-result-line-selected-yes").length,e=b.find(".tda-result-line-selected-no").length;b=c.find(".tda-style-group-info");a='<span class="tda-info-result-line-found" title="Found rules from this CSS" data-value="'+
a+'">'+a+'</span> : <span class="tda-info-result-line-critical" title="Critical Style from the Found rules" data-value="'+d+'">'+d+'</span> : <span class="tda-info-result-line-selected-yes" title="Rules manually included from this CSS" data-value="'+k+'">'+k+'</span> : <span class="tda-info-result-line-selected-no" title="Rules manually excluded from this CSS" data-value="'+e+'">'+e+'</span> : <span class="tda-info-result-line-diff" title="Supplementary CSS rules found by the automat/manual test" title="" data-value="'+
f+'">'+f+"</span>";b.length?b.html(a):c.append('<span class="tda-style-group-info">'+a+"</span>");tdAnalyzeCssMain.setSafeToLeave(!1)}function t(a){var c=d("#tdw-css-analyze"),b=c.find(".tda-results"),g=b.find(".tda-style-group:not(.tda-style-group-disabled)"),f=c.find(".tda-results-current"),k=c.find(".tda-results-history-wrap"),e=c.find(".tda-results-history"),h="",q="",n="",l="",p=g.find(".tda-result-line-found:not(.tda-result-line-selected-no), .tda-result-line-diff:not(.tda-result-line-selected-no), .tda-result-line-selected-yes"),
m=g.find(".tda-result-line-found.tda-result-line-critical:not(.tda-result-line-selected-no), .tda-result-line-diff.tda-result-line-critical:not(.tda-result-line-selected-no), .tda-result-line-selected-yes"),t=g.find(".tda-result-line-diff:not(.tda-result-line-selected-no, .tda-result-line-selected-yes )");g=g.find(".tda-result-line-found:not(.tda-result-line-selected-no, .tda-result-line-critical), .tda-result-line-diff:not(.tda-result-line-selected-no, .tda-result-line-critical), .tda-result-line-selected-yes");
""!==f.data("current")&&(k.show(),e.prepend('<div class="tda-results-history-item">'+(e.find(".tda-results-history-item").length+1)+": "+f.data("current").toString()+"</div>"));f.data("current",p.length);f.html("Found CSS Rules: "+p.length);b.find(".tda-style-group").each(function(){w(d(this))});if("undefined"===typeof a||!0!==a){var r=c.find(".tda-save-essential-css");setTimeout(function(){r.addClass("loading")},100);setTimeout(function(){r.addClass("done")},1500);setTimeout(function(){r.removeClass("loading");
r.removeClass("done")},3E3);p.length&&(h=v("essentialCss",p));m.length&&(q=v("criticalCss",m));t.length&&(n=v("diffCss",t));g.length&&(l=v("restCss",g));d.ajax({type:"POST",url:tdAnalyzeCssMain.getRestEndPoint("tda/save_essential_css","uuid="+tdAnalyzeCssMain.getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdaGlobal.wpRestNonce)},data:{post_id:window.tdaGlobal.postId,unique_id:tdAnalyzeCssMain.getUniqueID(),essential_css:h,critical_css:q,diff_css:n,rest_css:l,_nonce:window.tdb_globals.wpRestNonce},
success:function(a,b,c){tdAnalyzeCssMain.setSafeToLeave(!0);d("#wp-admin-bar-td_analyze_css_menu").addClass("tda-has-essential-css")},error:function(a,b,c){}})}}function x(a,c,b,g){var f=a.find(".tda-style:not(.tda-result-line-found,.tda-result-line-diff)");if(f.length)for(var k=0;k<f.length;k++){var e=f[k].textContent.split("{");if(2===e.length){var h=e[0].trimChar(" ").replace(/:?:active|:?:visited|:?:hover|:?:focus|:not\(:?:focus\)|:?:valid|:?:before|:?:after/,"");if(-1===h.indexOf("%")&&0!==h.indexOf("#wpadminbar")&&
0!==h.indexOf("#tdw-css-writer")&&0!==h.indexOf("#tdw-css-analyze")&&0!==h.indexOf(".tdw-")&&0!==h.indexOf(".ace_")&&0!==h.indexOf(".ace-")&&0!==h.indexOf("#tdb-modal")&&-1===h.indexOf(":not(")){try{var q=c.find(h)}catch(p){console.log('?? Selector:"'+h+'" Original:"'+e[0]+'"');console.log(f[k].textContent);console.log(p);continue}if(q.length){b?f[k].classList.add("tda-result-line-diff"):f[k].classList.add("tda-result-line-found");var n=!1;q.each(function(){1E3>d(this).offset().top&&(f[k].classList.add("tda-result-line-critical"),
n=!0)});e=/animation-name\s*:\s*([a-zA-Z0-9\-_]*)/gm;for(var l;null!==(l=e.exec(f[k].textContent));)l.index===e.lastIndex&&e.lastIndex++,1<l.length&&(h=a.find('.tda-style:not(.tda-result-line-found,.tda-result-line-diff):contains("keyframes '+l[1]+'")'),h.length&&(b?h.addClass("tda-result-line-diff"):h.addClass("tda-result-line-found"),n&&h.addClass("tda-result-line-critical")));for(e=/font-family:\s*([^;]+)/gm;null!==(l=e.exec(f[k].textContent));)l.index===e.lastIndex&&e.lastIndex++,1<l.length&&
(h=a.find('.tda-font-face:not(.tda-result-line-found,.tda-result-line-diff):contains("font-face")'),h.length&&h.each(function(){var a=d(this);0<a.text().indexOf(l[1])&&(b?a.addClass("tda-result-line-diff"):a.addClass("tda-result-line-found"),n&&a.addClass("tda-result-line-critical"))}))}}}}!0===g&&t()}function r(a){for(var c=[],b=0;b<a.contentWindow.EventListeners.listeners.length;b++){var g=a.contentWindow.EventListeners.listeners[b].target,f=a.contentWindow.EventListeners.listeners[b].type;"undefined"!==
typeof g.id&&("wpadminbar"===g.id||0===g.id.indexOf("wp-admin-bar")||0===g.id.indexOf("tdw-css-writer"))||d(g).closest("#wpadminbar").length||d(g).closest("#tdw-css-writer").length||d(g).closest("#tdw-css-analyze").length||"undefined"!==typeof g.className&&(0===g.className.indexOf("ace_")||0===g.className.indexOf("adminbar-")||0===g.className.indexOf("ab-item")||-1!==g.className.indexOf("td-login-button"))||0<="load unload cut copy paste mouseout touchstart touchmove".split(" ").indexOf(f)||"undefined"!==
typeof g.tagName&&"A"===g.tagName&&g.hasAttributes()&&"undefined"!==typeof g.attributes.href&&"undefined"!==typeof g.attributes.href.value&&"click"===f&&0!==g.attributes.href.value.indexOf("#")||c.push(a.contentWindow.EventListeners.listeners[b])}return c}function z(){var a=d(".tda-results");if(""===a.html()){a.html("");var c=d('iframe[id="tda-analyze-css-iframe"]'),b=0;c[0].contentDocument.documentElement.children[0].childNodes.forEach(function(e){if("undefined"!==typeof e.tagName){var h=e.id.trim();
if("td_analyze_css_frontend-css"!==h&&"td_live_css_frontend-css"!==h&&"admin-bar-css"!==h&&"google-fonts-style-css"!==h)switch(e.tagName){case "STYLE":""===h&&(h=++b);h=d('<div id="tda-analyze-'+h+'" class="tda-style-group tda-header-style-inline"><input type="checkbox" class="tda-enable-style-group" title="If you disable it, this CSS will be loaded fully" checked><div class="tda-result-label">Header Inline Style: '+h+'</div><div class="tda-result-lines"></div></div>');u(c,e.id,e.sheet,h.find(".tda-result-lines"))&&
a.append(h);break;case "LINK":if("text/css"===e.type){""===h&&(h=++b);var g="checked";if(0===h.indexOf("dashicons-css")||0===h.indexOf("tdc_admin_bar_menu-css")||0===h.indexOf("tdb_wp_admin-css"))g="";h=d('<div id="tda-analyze-'+h+'" class="tda-style-group tda-header-style-link '+("checked"===g?"":"tda-style-group-disabled")+'"><input type="checkbox" class="tda-enable-style-group" title="If you disable it, this CSS will be loaded fully" '+g+'><div class="tda-result-label">'+h+'</div><div class="tda-result-lines"></div></div>');
u(c,e.id,e.sheet,h.find(".tda-result-lines"))&&a.append(h)}}}});for(var g=c[0].contentDocument.documentElement.children[1].getElementsByTagName("style"),f=0;f<g.length;f++){var k=d('<div class="tda-style-group tda-body-style-inline"><input type="checkbox" class="tda-enable-style-group" title="If you disable it, this CSS will be loaded fully" checked><div class="tda-result-label">Body Inline Style: '+(f+1)+'</div><div class="tda-result-lines"></div></div>');u(c,"body",g.item(f).sheet,k.find(".tda-result-lines"))&&
a.append(k)}window.liveCheckContent=!1;var e=!0;x(a,c.contents(),!1,!1);e=!1;var h=c.contents().find("html")[0].outerHTML,q=c.width();setInterval(function(b){if(window.liveCheckContent&&!e){e=!0;b="";var g=c.width();b="undefined"!==typeof window.contentList&&window.contentList.length?window.contentList.shift():c.contents().find("html")[0].outerHTML;if(h===b&&q===g)e=!1;else{h=b;q=g;clearTimeout(window.test1);window.test1=setTimeout(function(){e=!1},1E4);var f=d('iframe[id="test-tda-analyze-css-iframe"]');
f.length||(f=d('<iframe id="test-tda-analyze-css-iframe" style="width:100%;height:'+window.innerHeight+'px;position:absolute;left:0;top:0;z-index:8998;border:0;"></iframe>'),d("body").prepend(f),d("body").prepend('<div style="width: 100%;height: 100%;background-color: rgb(220,220,220);position: fixed;z-index: 8999"></div>'),f.on("load",function(){x(a,f.contents(),!0,!1);e=!1}));f.attr("srcdoc",b);f.width(g)}}},500)}}tdAnalyzeCssMain={_isInitialized:!1,_mouseInitialPosition:m,_editorMoving:!1,_editorResizing:!1,
_safeToLeave:!1,$_editorWrapper:m,$_editorCover:m,$_window:m,_resizeOffset:m,init:function(){if(!tdAnalyzeCssMain._isInitialized){var a=new URL(window.location.href);(new URLSearchParams(a.search)).has("tda_action")||(tdAnalyzeCssMain.$_window=d(window),tdAnalyzeCssMain.$_editorWrapper=d("#tdw-css-analyze"),tdAnalyzeCssMain.$_editorCover=d("#tdw-css-analyze-cover"),tdAnalyzeCssMain._isInitialized=!0)}},hideEditor:function(){this.$_editorWrapper.removeClass("tdw-visible")},hideCover:function(){this.$_editorCover.hide()},
showEditor:function(){this.$_editorWrapper.addClass("tdw-visible");this.$_editorWrapper.css({left:(window.innerWidth-this.$_editorWrapper.outerWidth())/2,top:(window.innerHeight-this.$_editorWrapper.outerHeight())/2})},showCoverLoading:function(){this.$_editorCover.removeClass("tdw-css-analyze-cover-loading")},hideCoverLoading:function(){this.$_editorCover.addClass("tdw-css-analyze-cover-loading")},showCover:function(){this.$_editorCover.show()},getEditorPosition:function(){return tdAnalyzeCssMain._editorPosition},
setEditorPosition:function(a){tdAnalyzeCssMain._editorPosition=tdAnalyzeCssMain.$_editorWrapper.offset()},setMouseInitialPosition:function(a){tdAnalyzeCssMain._mouseInitialPosition=a},getMouseInitialPosition:function(){return tdAnalyzeCssMain._mouseInitialPosition},setSafeToLeave:function(a){this._safeToLeave=a},isSafeToLeave:function(){return this._safeToLeave},getRestEndPoint:function(a,c){return y.isEmpty(window.tdaGlobal.permalinkStructure)?window.tdaGlobal.wpRestUrl+a+"&"+c:window.tdaGlobal.wpRestUrl+
a+"?"+c},getUniqueID:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}};d().ready(function(){tdAnalyzeCssMain.init();if(tdAnalyzeCssMain._isInitialized)d("body").on("click","#wp-admin-bar-td_analyze_css_menu a",function(a){a.preventDefault();a.stopPropagation()}).on("click","#wp-admin-bar-td_clear_analyze_css a",function(a){a.preventDefault();a.stopPropagation();d.ajax({type:"POST",url:tdAnalyzeCssMain.getRestEndPoint("tda/delete_essential_css",
"uuid="+tdAnalyzeCssMain.getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdaGlobal.wpRestNonce)},data:{post_id:window.tdaGlobal.postId,_nonce:window.tdb_globals.wpRestNonce},success:function(a,b,g){tdAnalyzeCssMain.hideEditor();tdAnalyzeCssMain.hideCover();alert("Css Analyze removed");window.location.reload()},error:function(a,b,g){}})}).on("click","#wp-admin-bar-td_analyze_css a",function(a){a.preventDefault();a.stopPropagation();var c=d(this);tdAnalyzeCssMain.showCover();
c.closest("#wp-admin-bar-td_analyze_css_menu").hasClass("tda-has-essential-css")&&!confirm("The Analyzer Css will clear your existing css. Do you want to continue?")?tdAnalyzeCssMain.hideCover():(d("#wp-admin-bar-td_analyze_css_menu-default").parent().hide(),d.ajax({type:"POST",url:tdAnalyzeCssMain.getRestEndPoint("tda/delete_essential_css","uuid="+tdAnalyzeCssMain.getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdaGlobal.wpRestNonce)},data:{post_id:window.tdaGlobal.postId,
_nonce:window.tdb_globals.wpRestNonce},success:function(a,g,f){a=d(".tda-results");a.length&&a.empty();a=d('iframe[id="tda-analyze-css-iframe"]');g=window.location.href.split("#")[0];clearInterval(window.testInterval);a.length?a.attr("src",g):(a=d('<iframe id="tda-analyze-css-iframe" style="width:100%;height:'+window.innerHeight+'px;position:absolute;left:0;top:0;z-index:9000;border:0"></iframe>'),d("body").children("div").not("#wpadminbar, #tdw-css-analyze, #tdw-css-analyze-cover").remove(),d("body").prepend(a),
a.attr("src",g),a.on("load",function(){tdAnalyzeCssMain.showEditor();tdAnalyzeCssMain.showCover();tdAnalyzeCssMain.hideCoverLoading();z();t(!0);c.closest("#wp-admin-bar-td_analyze_css_menu").removeClass("tda-has-essential-css")}))},error:function(a,c,d){}}))}).on("click","#tdw-css-analyze",function(a){}).on("mousedown","#tdw-css-analyze .tdw-resize",function(a){if(a.currentTarget===a.target){var c=d(a.currentTarget);tdAnalyzeCssMain._editorResizing=!0;tdAnalyzeCssMain.setEditorPosition(a);tdAnalyzeCssMain.setMouseInitialPosition({left:a.pageX,
top:a.pageY});tdAnalyzeCssMain._resizeOffset={width:c.width(),height:c.height(),offsetLeft:a.pageX-c.offset().left,offsetTop:a.pageY-c.offset().top}}}).on("mouseup","#tdw-css-analyze .tdw-resize",function(a){a.currentTarget===a.target&&(tdAnalyzeCssMain._editorMoving=!1,tdAnalyzeCssMain.setMouseInitialPosition(m),tdAnalyzeCssMain._diffGap=m)}).on("mousedown","#tdw-css-analyze > header",function(a){a.currentTarget===a.target&&(tdAnalyzeCssMain._editorMoving=!0,tdAnalyzeCssMain.setEditorPosition(a),
tdAnalyzeCssMain.setMouseInitialPosition({left:a.pageX,top:a.pageY}))}).on("mouseup","#tdw-css-analyze > header",function(a){a.currentTarget===a.target&&(tdAnalyzeCssMain._editorMoving=!1,tdAnalyzeCssMain.setEditorPosition(a),tdAnalyzeCssMain.setMouseInitialPosition(m))}).on("mouseup",function(a){tdAnalyzeCssMain._editorMoving=!1;tdAnalyzeCssMain._editorResizing=!1;tdAnalyzeCssMain.setEditorPosition(a);tdAnalyzeCssMain._resizeOffset=m;tdAnalyzeCssMain.setMouseInitialPosition({left:a.pageX,top:a.pageY})}).on("mousemove",
function(a){if(tdAnalyzeCssMain._editorMoving){a.stopPropagation();a.preventDefault();var c=tdAnalyzeCssMain.getMouseInitialPosition();if("undefined"!==typeof c){var b=tdAnalyzeCssMain.getEditorPosition();tdAnalyzeCssMain.$_editorWrapper.css({left:a.pageX-tdAnalyzeCssMain.$_window.scrollLeft()-(c.left-b.left),top:a.pageY-tdAnalyzeCssMain.$_window.scrollTop()-(c.top-b.top)})}}else if(tdAnalyzeCssMain._editorResizing&&(a.stopPropagation(),a.preventDefault(),c=tdAnalyzeCssMain.getMouseInitialPosition(),
"undefined"!==typeof c)){var d={offsetLeft:0,offsetTop:0};y.isUndefined(tdAnalyzeCssMain._resizeOffset)||(d=tdAnalyzeCssMain._resizeOffset);b=tdAnalyzeCssMain.getEditorPosition();c=a.pageX-b.left+d.width-d.offsetLeft;a=a.pageY-b.top+d.height-d.offsetTop;tdAnalyzeCssMain.$_editorWrapper.css({width:c,height:a});tdAnalyzeCssMain.$_editorWrapper.data("width",c);tdAnalyzeCssMain.$_editorWrapper.data("height",a);tdAnalyzeCssMain._timerResize=setTimeout(function(){"undefined"!==typeof tdAnalyzeCssMain._timerResize&&
(clearTimeout(tdAnalyzeCssMain._timerResize),editor.resize(!0))},100)}}).on("click","#tdw-css-analyze .tda-close",function(a){tdAnalyzeCssMain.isSafeToLeave()?window.location.reload():confirm("Are you sure you want to leave? Please make sure you have saved the CSS.")&&window.location.reload()})});String.prototype.trimCharLeft=function(a){a===m&&(a="s");return this.replace(new RegExp("^["+a+"]+"),"")};String.prototype.trimCharRight=function(a){a===m&&(a="s");return this.replace(new RegExp("["+a+"]+$"),
"")};String.prototype.trimChar=function(a){return this.trimCharLeft(a).trimCharRight(a)};d(window).on("load",function(){if(tdAnalyzeCssMain._isInitialized){d("body").on("click",".tda-save-essential-css",function(){t()}).on("click",".tda-btn-auto",function(){d(this).addClass("tda-btn-disabled");var a=tdAnalyzeCssMain.$_editorWrapper.find(".tda-auto-wrap"),b=d('iframe[id="tda-analyze-css-iframe"]');a.css("display","flex");window.eventList=r(b[0]);clearInterval(window.testInterval);window.contentList=
[];window.eventIndex=0;window.waitForIframeLoading=!1;var g=0,f=d(".tda-results"),k=[{name:"Desktop - Not Scrolled",type:"desktop",callback:function(a){var c=window.location.href.split("#")[0];c!==b.attr("src")?(window.waitForIframeLoading=!0,b.on("load",function(){a.eventList=r(b[0]);window.waitForIframeLoading=!1;window.top.jQuery(".tda-total-steps").html(a.eventList.length)}),b.attr("src",c)):(a.eventList=r(b[0]),window.top.jQuery(".tda-total-steps").html(a.eventList.length));b[0].contentWindow.scrollTo(0,
0);tdAnalyzeCssMain.$_editorWrapper.find(".tda-range-window").val(b[0].contentWindow.outerWidth).trigger("change")}},{name:"Desktop - Scrolled",type:"desktop_scroll",callback:function(a){a.eventList=r(b[0]);b[0].contentWindow.scrollTo(0,b[0].contentWindow.outerHeight);window.top.jQuery(".tda-total-steps").html(a.eventList.length);setTimeout(function(){b[0].contentWindow.scrollTo(0,b[0].contentWindow.pageYOffset-100)},50)}},{name:"Desktop - Logged Out [Not Scrolled]",type:"desktop_logged_out",callback:function(a){var c=
window.location.href.split("#")[0];c=0>c.indexOf("?")?c+"?tda_action=1":c+"&tda_action=1";c!==b.attr("src")?(window.waitForIframeLoading=!0,b.on("load",function(){a.eventList=r(b[0]);window.waitForIframeLoading=!1;window.top.jQuery(".tda-total-steps").html(a.eventList.length);b.contents().remove("#tdw-css-analyze")}),b.attr("src",c)):(a.eventList=r(b[0]),window.top.jQuery(".tda-total-steps").html(a.eventList.length));b[0].contentWindow.scrollTo(0,0);d(".tda-range-window").val(b[0].contentWindow.outerWidth).trigger("change")}},
{name:"Desktop - Logged Out [Scrolled]",type:"desktop_scroll_logged_out",callback:function(a){a.eventList=r(b[0]);b[0].contentWindow.scrollTo(0,b[0].contentWindow.outerHeight);window.top.jQuery(".tda-total-steps").html(a.eventList.length);setTimeout(function(){b[0].contentWindow.scrollTo(0,b[0].contentWindow.pageYOffset-100)},50)}}],e;tdAnalyzeCssMain.$_editorWrapper.find(".tda-current-viewport").empty();k.forEach(function(a){tdAnalyzeCssMain.$_editorWrapper.find(".tda-current-viewport").append('<div class="tda-current-viewport-item" data-type="'+
a.type+'">'+a.name+"</div>")});window.testInterval=setInterval(function(){if(!waitForIframeLoading&&("undefined"===typeof e?k.some(function(a){return"undefined"===typeof a.solved?(a.callback(a),a.solved=!1,e=a,d('.tda-current-viewport .tda-current-viewport-item[data-type="'+e.type+'"]').addClass("tda-current-viewport-item-running"),!0):!1}):e.callback(e),"undefined"===typeof e||"undefined"!==typeof e.eventList)){for(var a=eventIndex;a<e.eventList.length;){var c=e.eventList[a].target;a=e.eventList[a].type;
if("keydown"===a){var n=new KeyboardEvent(a,{key:"e",keyCode:69,code:"KeyE",which:69,view:b[0].contentWindow,bubbles:!0,cancelable:!0});c.dispatchEvent(n);"undefined"===typeof c.className||-1===c.className.indexOf("tdb-head-search-form-input")&&-1===c.id.indexOf("td-header-search-mob")||d(c).val("e")}else if("focus"===a)c.focus();else{n=new MouseEvent(a,{view:b[0].contentWindow,bubbles:!0,cancelable:!0,composed:!0});if("click"===a&&"undefined"!==typeof c.className&&-1!==c.className.indexOf("td_mobile_submenu")){var l=
c.getElementsByTagName("i");l.length&&(c=l[0])}c.dispatchEvent(n)}window.eventIndex++;console.log(++g);console.log(c);console.log(a);tdAnalyzeCssMain.$_editorWrapper.find(".tda-auto-progress-info").css("visibility","visible");tdAnalyzeCssMain.$_editorWrapper.find(".tda-current-step").html(eventIndex);tdAnalyzeCssMain.$_editorWrapper.find(".tda-auto-progress-bar-fill").css("width",100*eventIndex/e.eventList.length+"%");eventIndex===e.eventList.length&&d('.tda-current-viewport .tda-current-viewport-item[data-type="'+
e.type+'"]').removeClass("tda-current-viewport-item-running").addClass("tda-current-viewport-item-done");setTimeout(function(){var a=d('iframe[id="tda-analyze-css-iframe"]');x(f,a.contents(),!0,!1)},300);return}k.some(function(a){return"undefined"!==typeof a.solved&&!1===a.solved?(a.solved=!0,e=m,!0):!1});k.some(function(a){return"undefined"===typeof a.solved?!0:!1})?window.eventIndex=0:(clearInterval(window.testInterval),x(f,b.contents(),!0,!0),tdAnalyzeCssMain.$_editorWrapper.find(".tda-auto-wrap").hide(),
tdAnalyzeCssMain.$_editorWrapper.find(".tda-btn-auto").hide(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-btn-manual").css("display","flex"),tdAnalyzeCssMain.$_editorWrapper.find(".tda-filter-viewports").show(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-filter-diff").show())}},1E3)}).on("click",".tda-btn-manual",function(){var a=d(this);a.toggleClass("tda-btn-manual-active");tdAnalyzeCssMain.$_editorWrapper.find(".tda-btn-auto").toggleClass("tda-btn-disabled");window.liveCheckContent=a.hasClass("tda-btn-manual-active");
a.hasClass("tda-btn-manual-active")?tdAnalyzeCssMain.hideCover():tdAnalyzeCssMain.showCover()}).on("change",".tda-only-selected",function(){var a=d(this);a.next("label").addClass("tda-filter-running");setTimeout(function(){d(".tda-only-diff").is(":checked")&&(d(".tda-only-diff").prop("checked",!1),tdAnalyzeCssMain.$_editorWrapper.find(".tda-style:not(.tda-result-line-diff), .tda-font-face:not(.tda-result-line-diff)").parent().show(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-analyze-frame-rule").show());
tdAnalyzeCssMain.$_editorWrapper.find(".tda-style:not(.tda-result-line-diff), .tda-font-face:not(.tda-result-line-diff)").parent().show();tdAnalyzeCssMain.$_editorWrapper.find(".tda-analyze-frame-rule").show();a.is(":checked")?(tdAnalyzeCssMain.$_editorWrapper.find(".tda-style:not(.tda-result-line-found), .tda-font-face:not(.tda-result-line-found)").parent().hide(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-analyze-frame-rule").hide(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-info-result-line-found").each(function(a,
c){a=d(c);c=a.data("value");0===parseInt(c,10)&&a.closest(".tda-style-group").hide()})):(tdAnalyzeCssMain.$_editorWrapper.find(".tda-style:not(.tda-result-line-found), .tda-font-face:not(.tda-result-line-found)").parent().show(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-analyze-frame-rule").show(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-style-group").show());a.next("label").removeClass("tda-filter-running")},100)}).on("change",".tda-only-diff",function(){var a=d(this);a.next("label").addClass("tda-filter-running");
setTimeout(function(){d(".tda-only-selected").is(":checked")&&(d(".tda-only-selected").prop("checked",!1),tdAnalyzeCssMain.$_editorWrapper.find(".tda-style:not(.tda-result-line-found), .tda-font-face:not(.tda-result-line-found)").parent().show(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-analyze-frame-rule").show(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-style-group").show());a.is(":checked")?(tdAnalyzeCssMain.$_editorWrapper.find(".tda-style:not(.tda-result-line-diff), .tda-font-face:not(.tda-result-line-diff)").parent().hide(),
tdAnalyzeCssMain.$_editorWrapper.find(".tda-analyze-frame-rule").hide()):(tdAnalyzeCssMain.$_editorWrapper.find(".tda-style:not(.tda-result-line-diff), .tda-font-face:not(.tda-result-line-diff)").parent().show(),tdAnalyzeCssMain.$_editorWrapper.find(".tda-analyze-frame-rule").show());a.next("label").removeClass("tda-filter-running")},100)}).on("click",".tda-user-check-label-yes",function(a){a.preventDefault();a.stopPropagation();a=d(this);a.parent().siblings(".tda-style, .tda-font-face").removeClass("tda-result-line-selected-no tda-result-line-selected-none").addClass("tda-result-line-selected-yes");
w(a.closest(".tda-style-group"));t(!0)}).on("click",".tda-user-check-label-no",function(a){a.preventDefault();a.stopPropagation();a=d(this);a.parent().siblings(".tda-style, .tda-font-face").removeClass("tda-result-line-selected-yes tda-result-line-selected-none").addClass("tda-result-line-selected-no");w(a.closest(".tda-style-group"));t(!0)}).on("click",".tda-user-check-label-none",function(a){a.preventDefault();a.stopPropagation();a=d(this);a.parent().siblings(".tda-style, .tda-font-face").removeClass("tda-result-line-selected-yes tda-result-line-selected-no").addClass("tda-result-line-selected-none");
w(a.closest(".tda-style-group"));t(!0)}).on("change",".tda-range-window",function(){d('iframe[id="tda-analyze-css-iframe"]').width(d(this).val())}).on("mouseenter",".tda-style, .tda-font-face",function(){"undefined"!==typeof window.test&&clearTimeout(window.test);var c=d(this);c.after(a);c.hasClass("tda-result-line-selected-yes")?a.find('input[name="tda-user-check"][value="yes"]').prop("checked",!0):c.hasClass("tda-result-line-selected-no")?a.find('input[name="tda-user-check"][value="no"]').prop("checked",
!0):a.find('input[name="tda-user-check"][value="none"]').prop("checked",!0)}).on("mouseleave",".tda-style, .tda-font-face",function(c){"undefined"!==typeof window.test&&clearTimeout(window.test);window.test=setTimeout(function(){a.remove()},50)}).on("mouseenter",".tda-style-form",function(){clearTimeout(window.test)}).on("mouseleave",".tda-style-form",function(c){window.test=setTimeout(function(){a.remove()},50)}).on("click",".tda-result-label",function(a){a=d(a.target);a.hasClass("tda-enable-style-group")?
(a.closest(".tda-style-group").toggleClass("tda-style-group-disabled"),t(!0)):d(this).closest(".tda-style-group").toggleClass("tda-result-expanded")}).on("click",".tda-enable-style-group",function(a){d(this).closest(".tda-style-group").toggleClass("tda-style-group-disabled");t(!0)}).on("click",".tda-btn-auto-cancel",function(){confirm("Are you sure? The automate test didn't finish its job!")&&(clearInterval(window.testInterval),d(".tda-auto-wrap").hide(),d(".tda-btn-auto").removeClass("tda-btn-disabled"))});
d(".tda-range-window").attr("max",window.innerWidth).attr("value",window.innerWidth);var a=d('<form class="tda-style-form"><label for="tda-user-check-yes" class="tda-user-check-label-yes" title="Include"><input type="radio" name="tda-user-check" class="tda-user-check-yes" value="yes"><span class="tda-user-check-icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768"><path d="M617.376 169.376l-329.376 329.376-137.376-137.376c-12.512-12.512-32.768-12.512-45.248 0s-12.512 32.768 0 45.248l160 160c12.512 12.512 32.768 12.512 45.248 0l352-352c12.512-12.512 12.512-32.768 0-45.248s-32.768-12.512-45.248 0z"></path></svg></span></label><label for="tda-user-check-no" class="tda-user-check-label-no" title="Exclude"><input type="radio" name="tda-user-check" class="tda-user-check-no" value="no"><span class="tda-user-check-icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768"><path d="M169.376 214.624l169.376 169.376-169.376 169.376c-12.512 12.512-12.512 32.768 0 45.248s32.768 12.512 45.248 0l169.376-169.376 169.376 169.376c12.512 12.512 32.768 12.512 45.248 0s12.512-32.768 0-45.248l-169.376-169.376 169.376-169.376c12.512-12.512 12.512-32.768 0-45.248s-32.768-12.512-45.248 0l-169.376 169.376-169.376-169.376c-12.512-12.512-32.768-12.512-45.248 0s-12.512 32.768 0 45.248z"></path></svg></span></label><label for="tda-user-check-none" class="tda-user-check-label-none" title="Automatic"><input type="radio" name="tda-user-check" class="tda-user-check-none" value="none" checked><span class="tda-user-check-icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 768 768"><path d="M685.856 277.312c-29.472-83.296-89.984-146.784-163.84-182.048s-161.28-42.336-244.576-12.864c-47.104 16.672-88.064 43.328-119.808 75.648l-93.632 88v-118.048c0-17.664-14.336-32-32-32s-32 14.336-32 32v191.936c0 0.48 0 0.96 0.032 1.408 0.16 3.68 0.928 7.2 2.208 10.432 1.28 3.264 3.136 6.336 5.536 9.12 0.384 0.416 0.768 0.864 1.152 1.248 2.912 3.040 6.432 5.504 10.368 7.2 3.808 1.632 7.968 2.56 12.352 2.624 0.128 0 0.224 0 0.352 0h192c17.664 0 32-14.336 32-32s-14.336-31.968-32-31.968h-111.232l90.56-85.088c24.864-25.344 57.504-46.72 95.456-60.16 66.656-23.584 136.48-17.952 195.648 10.304s107.488 78.976 131.072 145.632c5.888 16.672 24.192 25.376 40.832 19.488s25.376-24.192 19.488-40.832zM655.2 480l-89.6 84.192c-50.688 50.72-116.16 75.712-181.728 75.712s-131.040-24.96-181.024-74.944c-28.48-28.48-48.736-61.792-60.256-95.392-5.76-16.704-23.936-25.6-40.672-19.872s-25.6 23.936-19.872 40.672c14.72 42.848 40.224 84.544 75.552 119.84 62.496 62.464 144.448 93.696 226.304 93.664s163.776-31.296 225.536-93.088l94.56-88.8v118.016c0 17.664 14.336 32 32 32s32-14.336 32-32v-191.936c0-0.48 0-0.96-0.032-1.408-0.16-3.68-0.928-7.2-2.208-10.432-1.28-3.264-3.136-6.336-5.536-9.12-0.384-0.416-0.768-0.864-1.152-1.248-2.912-3.040-6.432-5.504-10.368-7.2-3.808-1.632-7.968-2.56-12.352-2.624-0.128 0-0.224 0-0.352 0h-192c-17.664 0-32 14.336-32 32s14.336 32 32 32z"></path></svg></span></label></form>')}})})(jQuery,
_);
